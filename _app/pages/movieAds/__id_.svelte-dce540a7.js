import{S as Se,i as Le,s as Oe,e as P,v as Y,c as E,a as Q,w as z,P as oe,f as R,x as J,p as O,n as G,d as T,A as K,I as pe,k as Z,m as x,o as ee,t as Me,j as M,g as De,l as D,b as v,E as de,F as k,h as He,a9 as Re,aa as Ce,H as _e,X as te,Y as le,T as ne,_ as ce,ab as Fe,Q as q,R as C,a3 as ie,a4 as se,V as ue,G as Ge}from"../../chunks/vendor-61e2293a.js";import{p as Qe}from"../../chunks/stores-4c526871.js";import{d as F}from"../../chunks/index-dbb8b31c.js";import{M as Xe,i as re}from"../../chunks/Main-b958c480.js";import{I as W}from"../../chunks/Search.svelte_svelte_type_style_lang-3051f97e.js";import{S as Ye}from"../../chunks/Search-cd6c4a07.js";import"../../chunks/Regex-c2d27ea0.js";function he(e,t,l){const o=e.slice();return o[41]=t[l],o[42]=t,o[43]=l,o}function me(e,t,l){const o=e.slice();return o[44]=t[l],o[45]=t,o[46]=l,o}function ze(e){let t,l,o,n,i,u,g,f,r,m,p,h;function _(...I){return e[18](e[41],...I)}function N(...I){return e[19](e[41],...I)}function S(){e[37].call(l,e[41])}function H(){e[38].call(n,e[41])}g=new W({props:{name:"trash"}});function L(){return e[39](e[41])}return{c(){t=P("li"),l=P("input"),o=M(),n=P("input"),i=M(),u=P("button"),Y(g.$$.fragment),f=M(),this.h()},l(I){t=E(I,"LI",{class:!0});var a=Q(t);l=E(a,"INPUT",{type:!0,placeholder:!0,class:!0}),o=D(a),n=E(a,"INPUT",{type:!0,placeholder:!0,class:!0}),i=D(a),u=E(a,"BUTTON",{class:!0});var U=Q(u);z(g.$$.fragment,U),U.forEach(T),f=D(a),a.forEach(T),this.h()},h(){v(l,"type","text"),v(l,"placeholder","Nom"),v(l,"class","svelte-stplms"),v(n,"type","text"),v(n,"placeholder","Type"),v(n,"class","svelte-stplms"),v(u,"class","svelte-stplms"),v(t,"class","svelte-stplms")},m(I,a){R(I,t,a),k(t,l),q(l,e[1].titles[e[1].titles.findIndex(N)].name),k(t,o),k(t,n),q(n,e[1].titles[e[1].titles.findIndex(_)].type),k(t,i),k(t,u),J(g,u,null),k(t,f),m=!0,p||(h=[C(l,"input",S),C(n,"input",H),C(u,"click",L),ie(r=re.call(null,t,e[43]===e[6].length-1))],p=!0)},p(I,a){e=I,a[0]&66&&l.value!==e[1].titles[e[1].titles.findIndex(N)].name&&q(l,e[1].titles[e[1].titles.findIndex(N)].name),a[0]&66&&n.value!==e[1].titles[e[1].titles.findIndex(_)].type&&q(n,e[1].titles[e[1].titles.findIndex(_)].type),r&&se(r.update)&&a[0]&64&&r.update.call(null,e[43]===e[6].length-1)},i(I){m||(O(g.$$.fragment,I),m=!0)},o(I){G(g.$$.fragment,I),m=!1},d(I){I&&T(t),K(g),p=!1,ue(h)}}}function Je(e){let t,l,o,n,i,u,g,f,r,m,p,h,_,N,S,H;function L(...c){return e[15](e[41],...c)}function I(...c){return e[16](e[41],...c)}function a(...c){return e[17](e[41],...c)}function U(){e[25].call(l,e[41])}function y(){e[26].call(n,e[41])}function V(){e[27].call(u,e[41])}r=new W({props:{name:"trash"}});function A(){return e[28](e[41])}let w=e[41].group.ads,$=[];for(let c=0;c<w.length;c+=1)$[c]=ge(me(e,w,c));const ae=c=>G($[c],1,1,()=>{$[c]=null});let B=e[41].group.closed&&Ie(e);return{c(){t=P("li"),l=P("input"),o=M(),n=P("input"),i=M(),u=P("input"),g=M(),f=P("button"),Y(r.$$.fragment),p=M();for(let c=0;c<$.length;c+=1)$[c].c();h=M(),B&&B.c(),_=Z(),this.h()},l(c){t=E(c,"LI",{class:!0});var b=Q(t);l=E(b,"INPUT",{type:!0,class:!0}),o=D(b),n=E(b,"INPUT",{type:!0,class:!0}),i=D(b),u=E(b,"INPUT",{type:!0,class:!0}),g=D(b),f=E(b,"BUTTON",{class:!0});var j=Q(f);z(r.$$.fragment,j),j.forEach(T),b.forEach(T),p=D(c);for(let X=0;X<$.length;X+=1)$[X].l(c);h=D(c),B&&B.l(c),_=Z(),this.h()},h(){v(l,"type","text"),v(l,"class","svelte-stplms"),v(n,"type","text"),v(n,"class","svelte-stplms"),v(u,"type","text"),v(u,"class","svelte-stplms"),v(f,"class","svelte-stplms"),v(t,"class","group svelte-stplms")},m(c,b){R(c,t,b),k(t,l),q(l,e[1].titles[e[1].titles.findIndex(a)].group.start),k(t,o),k(t,n),q(n,e[1].titles[e[1].titles.findIndex(I)].type),k(t,i),k(t,u),q(u,e[1].titles[e[1].titles.findIndex(L)].group.suffix),k(t,g),k(t,f),J(r,f,null),R(c,p,b);for(let j=0;j<$.length;j+=1)$[j].m(c,b);R(c,h,b),B&&B.m(c,b),R(c,_,b),N=!0,S||(H=[C(l,"input",U),C(n,"input",y),C(u,"input",V),C(f,"click",A),ie(m=re.call(null,t,e[43]===e[6].length-1&&!e[41].group.ads.length))],S=!0)},p(c,b){if(e=c,b[0]&66&&l.value!==e[1].titles[e[1].titles.findIndex(a)].group.start&&q(l,e[1].titles[e[1].titles.findIndex(a)].group.start),b[0]&66&&n.value!==e[1].titles[e[1].titles.findIndex(I)].type&&q(n,e[1].titles[e[1].titles.findIndex(I)].type),b[0]&66&&u.value!==e[1].titles[e[1].titles.findIndex(L)].group.suffix&&q(u,e[1].titles[e[1].titles.findIndex(L)].group.suffix),m&&se(m.update)&&b[0]&64&&m.update.call(null,e[43]===e[6].length-1&&!e[41].group.ads.length),b[0]&66){w=e[41].group.ads;let j;for(j=0;j<w.length;j+=1){const X=me(e,w,j);$[j]?($[j].p(X,b),O($[j],1)):($[j]=ge(X),$[j].c(),O($[j],1),$[j].m(h.parentNode,h))}for(x(),j=w.length;j<$.length;j+=1)ae(j);ee()}e[41].group.closed?B?(B.p(e,b),b[0]&64&&O(B,1)):(B=Ie(e),B.c(),O(B,1),B.m(_.parentNode,_)):B&&(x(),G(B,1,1,()=>{B=null}),ee())},i(c){if(!N){O(r.$$.fragment,c);for(let b=0;b<w.length;b+=1)O($[b]);O(B),N=!0}},o(c){G(r.$$.fragment,c),$=$.filter(Boolean);for(let b=0;b<$.length;b+=1)G($[b]);G(B),N=!1},d(c){c&&T(t),K(r),c&&T(p),_e($,c),c&&T(h),B&&B.d(c),c&&T(_),S=!1,ue(H)}}}function ge(e){let t,l,o,n,i,u,g,f,r,m,p,h,_;function N(...y){return e[12](e[41],...y)}function S(...y){return e[13](e[44],...y)}function H(...y){return e[14](e[44],...y)}function L(){e[29].call(l,e[44])}function I(){e[30].call(n,e[44])}function a(){e[31].call(u,e[41])}r=new W({props:{name:"trash"}});function U(){return e[32](e[41],e[46],e[42],e[43])}return{c(){t=P("li"),l=P("input"),o=M(),n=P("input"),i=M(),u=P("input"),g=M(),f=P("button"),Y(r.$$.fragment),this.h()},l(y){t=E(y,"LI",{class:!0});var V=Q(t);l=E(V,"INPUT",{type:!0,class:!0}),o=D(V),n=E(V,"INPUT",{type:!0,class:!0}),i=D(V),u=E(V,"INPUT",{type:!0,class:!0}),g=D(V),f=E(V,"BUTTON",{class:!0});var A=Q(f);z(r.$$.fragment,A),A.forEach(T),V.forEach(T),this.h()},h(){v(l,"type","text"),v(l,"class","svelte-stplms"),v(n,"type","text"),v(n,"class","svelte-stplms"),v(u,"type","text"),v(u,"class","svelte-stplms"),v(f,"class","svelte-stplms"),v(t,"class","group svelte-stplms")},m(y,V){R(y,t,V),k(t,l),q(l,e[1].titles[e[1].titles.findIndex(H)].name),k(t,o),k(t,n),q(n,e[1].titles[e[1].titles.findIndex(S)].type),k(t,i),k(t,u),q(u,e[1].titles[e[1].titles.findIndex(N)].group.suffix),k(t,g),k(t,f),J(r,f,null),p=!0,h||(_=[C(l,"input",L),C(n,"input",I),C(u,"input",a),C(f,"click",U),ie(m=re.call(null,t,e[43]===e[6].length-1&&e[46]===e[41].group.ads.length-1))],h=!0)},p(y,V){e=y,V[0]&66&&l.value!==e[1].titles[e[1].titles.findIndex(H)].name&&q(l,e[1].titles[e[1].titles.findIndex(H)].name),V[0]&66&&n.value!==e[1].titles[e[1].titles.findIndex(S)].type&&q(n,e[1].titles[e[1].titles.findIndex(S)].type),V[0]&66&&u.value!==e[1].titles[e[1].titles.findIndex(N)].group.suffix&&q(u,e[1].titles[e[1].titles.findIndex(N)].group.suffix),m&&se(m.update)&&V[0]&64&&m.update.call(null,e[43]===e[6].length-1&&e[46]===e[41].group.ads.length-1)},i(y){p||(O(r.$$.fragment,y),p=!0)},o(y){G(r.$$.fragment,y),p=!1},d(y){y&&T(t),K(r),h=!1,ue(_)}}}function Ie(e){let t,l,o,n,i,u,g,f,r,m,p,h,_,N,S;function H(...A){return e[9](e[41],...A)}function L(...A){return e[10](e[41],...A)}function I(...A){return e[11](e[41],...A)}function a(){e[33].call(l,e[41])}function U(){e[34].call(n,e[41])}function y(){e[35].call(u,e[41])}r=new W({props:{name:"trash"}});function V(){return e[36](e[41],e[42],e[43])}return{c(){t=P("li"),l=P("input"),o=M(),n=P("input"),i=M(),u=P("input"),g=M(),f=P("button"),Y(r.$$.fragment),p=M(),this.h()},l(A){t=E(A,"LI",{class:!0});var w=Q(t);l=E(w,"INPUT",{type:!0,class:!0}),o=D(w),n=E(w,"INPUT",{type:!0,class:!0}),i=D(w),u=E(w,"INPUT",{type:!0,class:!0}),g=D(w),f=E(w,"BUTTON",{class:!0});var $=Q(f);z(r.$$.fragment,$),$.forEach(T),p=D(w),w.forEach(T),this.h()},h(){v(l,"type","text"),v(l,"class","svelte-stplms"),v(n,"type","text"),v(n,"class","svelte-stplms"),v(u,"type","text"),v(u,"class","svelte-stplms"),f.disabled=m=e[6][e[43]+1],v(f,"class","svelte-stplms"),v(t,"class","group svelte-stplms")},m(A,w){R(A,t,w),k(t,l),q(l,e[1].titles[e[1].titles.findIndex(I)].group.end),k(t,o),k(t,n),q(n,e[1].titles[e[1].titles.findIndex(L)].type),k(t,i),k(t,u),q(u,e[1].titles[e[1].titles.findIndex(H)].group.suffix),k(t,g),k(t,f),J(r,f,null),k(t,p),_=!0,N||(S=[C(l,"input",a),C(n,"input",U),C(u,"input",y),C(f,"click",V),ie(h=re.call(null,t,e[43]===e[6].length-1))],N=!0)},p(A,w){e=A,w[0]&66&&l.value!==e[1].titles[e[1].titles.findIndex(I)].group.end&&q(l,e[1].titles[e[1].titles.findIndex(I)].group.end),w[0]&66&&n.value!==e[1].titles[e[1].titles.findIndex(L)].type&&q(n,e[1].titles[e[1].titles.findIndex(L)].type),w[0]&66&&u.value!==e[1].titles[e[1].titles.findIndex(H)].group.suffix&&q(u,e[1].titles[e[1].titles.findIndex(H)].group.suffix),(!_||w[0]&64&&m!==(m=e[6][e[43]+1]))&&(f.disabled=m),h&&se(h.update)&&w[0]&64&&h.update.call(null,e[43]===e[6].length-1)},i(A){_||(O(r.$$.fragment,A),_=!0)},o(A){G(r.$$.fragment,A),_=!1},d(A){A&&T(t),K(r),N=!1,ue(S)}}}function ve(e){let t,l,o,n;const i=[Je,ze],u=[];function g(f,r){return f[41].group?0:1}return t=g(e),l=u[t]=i[t](e),{c(){l.c(),o=Z()},l(f){l.l(f),o=Z()},m(f,r){u[t].m(f,r),R(f,o,r),n=!0},p(f,r){let m=t;t=g(f),t===m?u[t].p(f,r):(x(),G(u[m],1,1,()=>{u[m]=null}),ee(),l=u[t],l?l.p(f,r):(l=u[t]=i[t](f),l.c()),O(l,1),l.m(o.parentNode,o))},i(f){n||(O(l),n=!0)},o(f){G(l),n=!1},d(f){u[t].d(f),f&&T(o)}}}function Ke(e){let t,l=e[1].movieAds[e[0]].film+"",o,n,i,u,g,f=e[6],r=[];for(let p=0;p<f.length;p+=1)r[p]=ve(he(e,f,p));const m=p=>G(r[p],1,1,()=>{r[p]=null});return{c(){t=P("h1"),o=Me(l),i=M(),u=P("ul");for(let p=0;p<r.length;p+=1)r[p].c();this.h()},l(p){t=E(p,"H1",{class:!0});var h=Q(t);o=De(h,l),h.forEach(T),i=D(p),u=E(p,"UL",{class:!0});var _=Q(u);for(let N=0;N<r.length;N+=1)r[N].l(_);_.forEach(T),this.h()},h(){v(t,"class","svelte-stplms"),v(u,"class","svelte-stplms"),de(u,"focused",e[3])},m(p,h){R(p,t,h),k(t,o),R(p,i,h),R(p,u,h);for(let _=0;_<r.length;_+=1)r[_].m(u,null);g=!0},p(p,h){if((!g||h[0]&3)&&l!==(l=p[1].movieAds[p[0]].film+"")&&He(o,l),h[0]&67){f=p[6];let _;for(_=0;_<f.length;_+=1){const N=he(p,f,_);r[_]?(r[_].p(N,h),O(r[_],1)):(r[_]=ve(N),r[_].c(),O(r[_],1),r[_].m(u,null))}for(x(),_=f.length;_<r.length;_+=1)m(_);ee()}h[0]&8&&de(u,"focused",p[3])},i(p){if(!g){n||Re(()=>{n=Ce(t,Fe,{}),n.start()});for(let h=0;h<f.length;h+=1)O(r[h]);g=!0}},o(p){r=r.filter(Boolean);for(let h=0;h<r.length;h+=1)G(r[h]);g=!1},d(p){p&&T(t),p&&T(i),p&&T(u),_e(r,p)}}}function We(e){let t;return{c(){t=P("input"),this.h()},l(l){t=E(l,"INPUT",{type:!0,placeholder:!0}),this.h()},h(){v(t,"type","text"),v(t,"placeholder","???"),t.disabled=!0},m(l,o){R(l,t,o)},p:Ge,d(l){l&&T(t)}}}function Ze(e){let t,l,o;return{c(){t=P("input"),this.h()},l(n){t=E(n,"INPUT",{type:!0,placeholder:!0}),this.h()},h(){v(t,"type","text"),v(t,"placeholder","Type")},m(n,i){R(n,t,i),q(t,e[1].titles[e[1].titles.findIndex(e[8])].type),l||(o=C(t,"input",e[24]),l=!0)},p(n,i){i[0]&34&&t.value!==n[1].titles[n[1].titles.findIndex(n[8])].type&&q(t,n[1].titles[n[1].titles.findIndex(n[8])].type)},d(n){n&&T(t),l=!1,o()}}}function xe(e){let t,l,o,n,i,u,g,f,r,m;function p(a){e[20](a)}function h(a){e[21](a)}function _(a){e[22](a)}function N(a){e[23](a)}let S={placeholder:"Nom",options:e[1].titles.map(be)};e[2]!==void 0&&(S.input=e[2]),e[4]!==void 0&&(S.query=e[4]),e[3]!==void 0&&(S.focused=e[3]),e[5]!==void 0&&(S.value=e[5]),t=new Ye({props:S}),te.push(()=>le(t,"input",p)),te.push(()=>le(t,"query",h)),te.push(()=>le(t,"focused",_)),te.push(()=>le(t,"value",N));function H(a,U){return a[5]?Ze:We}let L=H(e),I=L(e);return r=new W({props:{name:"plus"}}),{c(){Y(t.$$.fragment),u=M(),I.c(),g=M(),f=P("button"),Y(r.$$.fragment)},l(a){z(t.$$.fragment,a),u=D(a),I.l(a),g=D(a),f=E(a,"BUTTON",{});var U=Q(f);z(r.$$.fragment,U),U.forEach(T)},m(a,U){J(t,a,U),R(a,u,U),I.m(a,U),R(a,g,U),R(a,f,U),J(r,f,null),m=!0},p(a,U){const y={};U[0]&2&&(y.options=a[1].titles.map(be)),!l&&U[0]&4&&(l=!0,y.input=a[2],ne(()=>l=!1)),!o&&U[0]&16&&(o=!0,y.query=a[4],ne(()=>o=!1)),!n&&U[0]&8&&(n=!0,y.focused=a[3],ne(()=>n=!1)),!i&&U[0]&32&&(i=!0,y.value=a[5],ne(()=>i=!1)),t.$set(y),L===(L=H(a))&&I?I.p(a,U):(I.d(1),I=L(a),I&&(I.c(),I.m(g.parentNode,g)))},i(a){m||(O(t.$$.fragment,a),O(r.$$.fragment,a),m=!0)},o(a){G(t.$$.fragment,a),G(r.$$.fragment,a),m=!1},d(a){K(t,a),a&&T(u),I.d(a),a&&T(g),a&&T(f),K(r)}}}function et(e){let t,l,o;return t=new Xe({props:{$$slots:{form:[xe],default:[Ke]},$$scope:{ctx:e}}}),t.$on("submit",e[40]),{c(){l=P("div"),Y(t.$$.fragment),this.h()},l(n){l=E(n,"DIV",{style:!0});var i=Q(l);z(t.$$.fragment,i),this.h()},h(){oe(l,"display","contents"),oe(l,"--rows","auto 1fr auto")},m(n,i){R(n,l,i),J(t,l,null),o=!0},p(n,i){const u={};i[0]&127|i[1]&65536&&(u.$$scope={dirty:i,ctx:n}),t.$set(u)},i(n){o||(O(t.$$.fragment,n),o=!0)},o(n){G(t.$$.fragment,n),o=!1},d(n){n&&T(l),K(t,n)}}}const be=e=>({label:e.name,value:e});function tt(e,t,l){let o,n,i,u;pe(e,F,s=>l(1,i=s)),pe(e,Qe,s=>l(7,u=s));let g,f=!1,r="",m;const p=s=>s._id===m._id,h=(s,d)=>d._id===s.titleId,_=(s,d)=>d._id===s.titleId,N=(s,d)=>d._id===s.titleId,S=(s,d)=>d._id===s.titleId,H=(s,d)=>d._id===s,L=(s,d)=>d._id===s,I=(s,d)=>d._id===s.titleId,a=(s,d)=>d._id===s.titleId,U=(s,d)=>d._id===s.titleId,y=(s,d)=>d._id===s.titleId,V=(s,d)=>d._id===s.titleId;function A(s){g=s,l(2,g)}function w(s){r=s,l(4,r)}function $(s){f=s,l(3,f)}function ae(s){m=s,l(5,m)}function B(){i.titles[i.titles.findIndex(s=>s._id===m._id)].type=this.value,F.set(i)}function c(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].group.start=this.value,F.set(i)}function b(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].type=this.value,F.set(i)}function j(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].group.suffix=this.value,F.set(i)}const X=s=>{ce(F,i.movieAds[o].ads=i.movieAds[o].ads.filter(d=>d!==s),i)};function ye(s){i.titles[i.titles.findIndex(d=>d._id===s)].name=this.value,F.set(i)}function ke(s){i.titles[i.titles.findIndex(d=>d._id===s)].type=this.value,F.set(i)}function $e(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].group.suffix=this.value,F.set(i)}const Te=(s,d,fe,Be)=>{l(6,fe[Be].group.ads=s.group.ads.filter((lt,Ve)=>Ve!==d),n)};function Ne(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].group.end=this.value,F.set(i)}function Ue(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].type=this.value,F.set(i)}function we(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].group.suffix=this.value,F.set(i)}const Pe=(s,d,fe)=>{l(6,d[fe].group.closed=!1,n)};function Ee(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].name=this.value,F.set(i)}function Ae(s){i.titles[i.titles.findIndex(d=>d._id===s.titleId)].type=this.value,F.set(i)}const je=s=>{ce(F,i.movieAds[o].ads=i.movieAds[o].ads.filter(d=>d!==s),i)},qe=()=>{const s=n[n.length-1];(s==null?void 0:s.group)&&!s.group.closed?s.titleId===m._id?s.group.closed=!0:s.group.ads.push(m._id):i.movieAds[o].ads.push({titleId:m._id,group:m.group?{ads:[],closed:!1}:void 0}),F.set(i),l(4,r=""),l(5,m=void 0),g.focus()};return e.$$.update=()=>{e.$$.dirty[0]&130&&l(0,o=i.movieAds.findIndex(s=>s._id===u.params._id)),e.$$.dirty[0]&3&&l(6,n=i.movieAds[o].ads)},[o,i,g,f,r,m,n,u,p,h,_,N,S,H,L,I,a,U,y,V,A,w,$,ae,B,c,b,j,X,ye,ke,$e,Te,Ne,Ue,we,Pe,Ee,Ae,je,qe]}class ot extends Se{constructor(t){super();Le(this,t,tt,et,Oe,{},null,[-1,-1])}}export{ot as default};
